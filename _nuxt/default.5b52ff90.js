import{u as c}from"./pocketbase.452a775a.js";import{i as l,u as p,o as u,j as h,p as _,k as f,a as m,I as b,s as k}from"./entry.de119fc3.js";import{_ as y}from"./_plugin-vue_export-helper.a1a6add7.js";const v=""+new URL("refresh.7b12f5b3.svg",import.meta.url).href,w=f("img",{src:v},null,-1),S=[w],g=l({__name:"RefreshButton",setup(e){const t=c();var s=t.authStore.model;t.authStore.onChange(a=>{s=t.authStore.model});function r(){t.collection("users").authRefresh()}return(a,i)=>p(s)?(u(),h("div",{key:0,id:"health",onClick:r},S)):_("",!0)}}),{$sentrySetUser:$}=m(),n=c();var o=n.authStore.model;n.authStore.onChange(e=>{o=n.authStore.model});o&&(window.location.href.includes("/?refreshed=true")||n.collection("users").authRefresh(),$({email:o.email,user_id:o.id}));const B={data(){return{robot_status:"happy",refreshed:!1}},methods:{async check_status(){try{(await(await fetch("https://bot.mikadev.tech/app/api/health")).json()).Status=="alive"?this.robot_status="happy":this.robot_status="sad"}catch{this.robot_status="sad"}},urlBase64ToUint8Array(e){const t="=".repeat((4-e.length%4)%4),s=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(s);return Uint8Array.from([...r].map(a=>a.charCodeAt(0)))}},async beforeMount(){this.refreshed=!0},mounted(){this.check_status(),setInterval(()=>{this.check_status()},1e4)}};function C(e,t,s,r,a,i){const d=g;return u(),h("div",null,[b(e.$slots,"default"),k(d)])}const N=y(B,[["render",C]]);export{N as default};
