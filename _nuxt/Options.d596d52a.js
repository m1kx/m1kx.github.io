import{p as a}from"./pocketbase.0539cbe6.js";import{a as d,b as h,f as n,h as c,t as u,k as p,v as g,o as m}from"./entry.59b30187.js";const _={name:"Options",data(){return{current:"",courses:"",loading_upd:!1}},props:{currentUser:a.currentUser},mounted(){this.courses=this.currentUser.subjects.replaceAll(":",","),this.current=this.currentUser.class;const t=document.getElementsByClassName("select");for(let e=0;e<t.length;e++){const s=t[e];s.onclick=()=>{s.classList.add("selected");for(let l=0;l<t.length;l++)t[l]!=s&&t[l].classList.remove("selected")}}},methods:{validCheck(){const t=document.getElementsByClassName("valid-check");let e=!0;for(let s=0;s<t.length;s++){const l=t[s];l.checkValidity()||(l.style.outline="3px dashed #942525",setTimeout(()=>{l.style.outline=""},4e3),e=!1)}return e},button_select(t){t.preventDefault(),this.current=t.srcElement.innerHTML},loading(t){const e=t,s=t;s.disabled=!0;const l=t.innerHTML;var i="L\xE4dt";e.innerHTML=i+".",this.loading_upd=!0;var o=setInterval(()=>{if(!this.loading_upd){clearInterval(o),t.innerHTML=l,s.disabled=!1;return}e.innerHTML.length>i.length+3?e.innerHTML=i+".":e.innerHTML+="."},400)},async button_submit(t){if(!this.validCheck()){setTimeout(()=>{alert("Bitte richtige Werte in markierte felder eingeben...")},100);return}if(this.current==""){alert("Bitte eine Stufe angeben...");return}if(this.current==this.currentUser.class&&this.courses.replaceAll(",",":")==this.currentUser.subjects){console.log("same");return}this.loading(t.srcElement);const e={class:this.current,subjects:this.courses.replaceAll(",",":")};await a.instance.collection("users").update(this.currentUser.id,e),this.loading_upd=!1}}};const f={id:"login",style:{"text-align":"center"}},b={id:"login-style",class:"area"},v=n("h2",{style:{"text-decoration":"underline","underline-offset":"10px","font-weight":"500","margin-top":"0"}},"Daten Aktualisieren",-1),k={class:"highlight"},x={class:"highlight"},y=n("label",null,"Kurse",-1),U=n("br",null,null,-1);function L(t,e,s,l,i,o){return m(),h("div",f,[n("div",b,[v,n("div",null,[c("(Kurse aktuell: "),n("div",k,u(s.currentUser.subjects.replaceAll(":",",")),1),c(" & Stufe: "),n("div",x,u(s.currentUser.class),1),c(")")]),y,p(n("input",{onkeyup:"this.value = this.value.toUpperCase();",class:"valid-check","onUpdate:modelValue":e[0]||(e[0]=r=>i.courses=r),id:"courses",type:"text",placeholder:"E G1,D G4,M L1,MU G1",pattern:"^([A-Z]{1,2} [A-Z]\\d)(,([A-Z]{1,2} [A-Z]\\d))*$",required:""},null,512),[[g,i.courses]]),n("label",null,"Stufe: "+u(i.current),1),n("button",{class:"select",onClick:e[1]||(e[1]=r=>o.button_select(r))},"EF"),n("button",{class:"select",onClick:e[2]||(e[2]=r=>o.button_select(r))},"Q1"),n("button",{class:"select",onClick:e[3]||(e[3]=r=>o.button_select(r))},"Q2"),U,n("button",{onClick:e[4]||(e[4]=r=>o.button_submit(r)),style:{"background-color":"rgba(255, 255, 255, 0.162)","margin-top":"35px",width:"50vw"}},"OK")])])}const A=d(_,[["render",L]]);export{A as O};
