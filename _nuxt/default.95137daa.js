import{_ as i}from"./_plugin-vue_export-helper.a1a6add7.js";import{o as u,a as _,b as p,q as l,s as h,f as d}from"./entry.e2494dfb.js";import{p as c}from"./pocketbase.0539cbe6.js";const m={name:"HealthCheck",props:{bot_status:{type:String,default:""}},data(){return{clicks:0}},methods:{navigatetoerr(){var t;this.clicks++,this.bot_status=="sad"&&this.clicks>10&&((t=window.open("https://bot.mikadev.tech/app/api/health","_blank"))==null||t.focus())}}},f=["src"];function b(t,s,e,r,a,o){return u(),_("div",{id:"health",onClick:s[0]||(s[0]=(...n)=>o.navigatetoerr&&o.navigatetoerr(...n))},[p("img",{src:`robot_${e.bot_status}.svg`},null,8,f)])}const k=i(m,[["render",b]]),{$sentrySetUser:g}=l();c.currentUser&&g({email:c.currentUser.email,user_id:c.currentUser.id});const v={data(){return{robot_status:"happy"}},methods:{async check_status(){try{(await(await fetch("https://bot.mikadev.tech/app/api/health")).json()).Status=="alive"?this.robot_status="happy":this.robot_status="sad"}catch(t){console.log(t),this.robot_status="sad"}},urlBase64ToUint8Array(t){const s="=".repeat((4-t.length%4)%4),e=(t+s).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(e);return Uint8Array.from([...r].map(a=>a.charCodeAt(0)))}},mounted(){this.check_status(),setInterval(()=>{this.check_status()},9e3)}};function $(t,s,e,r,a,o){const n=k;return u(),_("div",null,[h(t.$slots,"default"),d(n,{bot_status:a.robot_status},null,8,["bot_status"])])}const x=i(v,[["render",$]]);export{x as default};
