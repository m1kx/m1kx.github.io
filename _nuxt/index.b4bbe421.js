import{_ as m}from"./_plugin-vue_export-helper.a1a6add7.js";import{o,a as i,b as t,t as d,F as $,r as E,e as h,f as l,u as p,h as S,w as U,i as N,p as C,j as O}from"./entry.039d5c64.js";import{p as c}from"./pocketbase.0539cbe6.js";import{O as k}from"./Options.54693497.js";const b={name:"DataDisplay",props:{day_data:{type:Object,default:"Null"},heading:{type:String,default:"err"}},methods:{split_inner(e){return e.split("|")},fmt_data(){const e=this.day_data.hash.split("!!!");for(let n=0;n<e.length;n++)e[n]=e[n].split("|");return e}}},D={class:"data-display"},A={key:1};function T(e,n,a,y,r,_){return o(),i("div",D,[t("h2",null,d(a.heading),1),_.fmt_data()[0]!=""?(o(!0),i($,{key:0},E(_.fmt_data(),(s,f)=>(o(),i("div",null,[t("p",null,[h(d(s[1])+" "+d(s[2])+" ",1),t("i",null,d(s[5]),1)])]))),256)):(o(),i("div",A," Keine Ereignisse "))])}const w=m(b,[["render",T]]),M={name:"Display",props:{currentUser:c.currentUser},data(){return{h_data:{hash:atob(this.currentUser.h_hash)},m_data:{hash:atob(this.currentUser.m_hash)},days:{day_1:"",day_2:""}}},async mounted(){const e=await c.instance.collection("times").getOne("ux8ausqmf2h57dd");this.days.day_1=e.day_1,this.days.day_2=e.day_2}},V={id:"display"},B={id:"display-container",class:"area",pos:"top"},H=t("div",{id:"seperator"},null,-1);function I(e,n,a,y,r,_){const s=w;return o(),i("div",V,[t("div",B,[l(s,{day_data:r.h_data,heading:r.days.day_1},null,8,["day_data","heading"]),H,l(s,{day_data:r.m_data,heading:r.days.day_2},null,8,["day_data","heading"])])])}const F=m(M,[["render",I]]),j={name:"ScoreDisplay",data(){return{list:[]}},async mounted(){const e=await c.instance.collection("users").getFullList(200,{});this.list=e,this.list.sort((n,a)=>a.score+a.h_score-(n.score+n.h_score)),this.list.splice(5,this.list.length-5),console.log(this.list)}},R={class:"area",id:"score-display"},q={id:"score-content"},z=t("h2",null,"EVA SCORE",-1),G=t("h3",null,"DEIN SCORE",-1),K=t("h3",null,"TOP 5 SCORE",-1),P={id:"your-score",class:"score"},W=t("div",{id:"score-seperator"},null,-1),J={id:"top-score",class:"score"},Q={key:0},X={key:0,style:{color:"rgb(157, 241, 154)"}},Y={key:1};function Z(e,n,a,y,r,_){return o(),i("div",R,[t("div",q,[z,G,K,t("div",P,[t("div",null,[t("h2",null,d(p(c).currentUser.score+p(c).currentUser.h_score),1)])]),W,t("div",J,[t("div",null,[(o(!0),i($,null,E(r.list,(s,f)=>(o(),i("div",null,[s.score+s.h_score!=0?(o(),i("div",Q,[s.id==p(c).currentUser.id?(o(),i("div",X,d(s.score+s.h_score),1)):(o(),i("div",Y,d(s.score+s.h_score),1))])):S("",!0)]))),256))])])])])}const tt=m(j,[["render",Z]]),et={components:{Options:k},data(){return{currentUser:c.instance.authStore.model}},methods:{loading(e){const n=e;var a="L\xE4dt";n.innerHTML=a+".",setInterval(function(){n.innerHTML.length>a.length+3?n.innerHTML=a+".":n.innerHTML+="."},400)},async signOut(e){this.loading(e.srcElement),c.instance.authStore.clear()},async deleteAccount(e){const n=prompt("Willst du den Account wirklich l\xF6schen? (ja/nein)");this.currentUser&&n=="ja"&&c.instance.collection("users").delete(this.currentUser.id)}},mounted(){c.instance.authStore.onChange(e=>{this.currentUser=c.instance.authStore.model})}};const u=e=>(C("data-v-f753af9a"),e=e(),O(),e),nt={id:"main-content"},st={key:0,id:"main-settings"},ot={key:0},it={id:"main-heading"},rt=u(()=>t("br",null,null,-1)),ct=u(()=>t("br",null,null,-1)),at={id:"mail-notify"},dt={key:1},_t=u(()=>t("p",{id:"confirm"},"Bitte email best\xE4tigen und danach neu laden",-1)),lt=[_t],ut={key:1},ht=u(()=>t("h1",null,"LMG Vertretungsplan Bot \u{1F916}",-1)),pt=u(()=>t("p",null,"Automatische Nachrichten zu deinen aktuellen Vertetungen/Entf\xE4llen (beta)",-1)),mt=u(()=>t("button",{id:"signin"},"ANMELDEN",-1)),yt=u(()=>t("button",{id:"signin"},"ACCOUNT ERSTELLEN",-1));function ft(e,n,a,y,r,_){var x;const s=F,f=tt,L=k,v=N;return o(),i("div",nt,[r.currentUser?(o(),i("div",st,[r.currentUser.verified?(o(),i("div",ot,[t("h1",it,"HALLO, "+d((x=r.currentUser)==null?void 0:x.email.split("@")[0].toUpperCase()),1),l(s,{currentUser:r.currentUser},null,8,["currentUser"]),l(f),l(L,{currentUser:r.currentUser},null,8,["currentUser"]),t("p",null,[h("Angemeldet!"),rt,h("(user-id: "+d(p(c).currentUser.id)+")",1),ct,h("( "),t("i",at,d(p(c).currentUser.email),1),h(")")])])):(o(),i("div",dt,lt)),t("button",{id:"signout",onClick:n[0]||(n[0]=g=>_.signOut(g))},"ABMELDEN"),t("button",{id:"delete",onClick:n[1]||(n[1]=g=>_.deleteAccount(g))},"ACCOUNT L\xD6SCHEN")])):(o(),i("div",ut,[ht,pt,l(v,{to:"/login"},{default:U(()=>[mt]),_:1}),l(v,{to:"/signup"},{default:U(()=>[yt]),_:1})]))])}const $t=m(et,[["render",ft],["__scopeId","data-v-f753af9a"]]);export{$t as default};
