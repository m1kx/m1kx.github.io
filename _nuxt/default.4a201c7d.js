import{_ as u}from"./_plugin-vue_export-helper.a1a6add7.js";import{o as h,j as _,k as d,a as l,G as p,s as f}from"./entry.e9e461dd.js";import{u as m}from"./pocketbase.452a775a.js";const b={name:"HealthCheck",props:{bot_status:{type:String,default:""}},data(){return{clicks:0}},methods:{navigatetoerr(){var t;this.clicks++,this.bot_status=="sad"&&this.clicks>10&&((t=window.open("https://bot.mikadev.tech/app/api/health","_blank"))==null||t.focus())}}},k=["src"];function v(t,e,s,r,a,n){return h(),_("div",{id:"health",onClick:e[0]||(e[0]=(...c)=>n.navigatetoerr&&n.navigatetoerr(...c))},[d("img",{src:`robot_${s.bot_status}.svg`},null,8,k)])}const g=u(b,[["render",v]]),{$sentrySetUser:y}=l(),i=m();var o=i.authStore.model;i.authStore.onChange(t=>{o=i.authStore.model});o&&y({email:o.email,user_id:o.id});const $={data(){return{robot_status:"happy",refreshed:!1}},methods:{async check_status(){try{(await(await fetch("https://bot.mikadev.tech/app/api/health")).json()).Status=="alive"?this.robot_status="happy":this.robot_status="sad"}catch{this.robot_status="sad"}},urlBase64ToUint8Array(t){const e="=".repeat((4-t.length%4)%4),s=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(s);return Uint8Array.from([...r].map(a=>a.charCodeAt(0)))}},async beforeMount(){this.refreshed=!0},mounted(){this.check_status(),setInterval(()=>{this.check_status()},1e4)}};function w(t,e,s,r,a,n){const c=g;return h(),_("div",null,[p(t.$slots,"default"),f(c,{bot_status:a.robot_status},null,8,["bot_status"])])}const A=u($,[["render",w]]);export{A as default};
