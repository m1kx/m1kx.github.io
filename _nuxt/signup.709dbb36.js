import{l as c,a as h,b as s,k as u,v as d,t as _,e as p,f as w,w as f,i as g,o as v}from"./entry.73dda3d5.js";import{p as r}from"./pocketbase.0539cbe6.js";import{O as b}from"./Options.d6a9ca61.js";import{_ as k}from"./_plugin-vue_export-helper.a1a6add7.js";const y={data(){return{password:"",username:"",password_w:"",current:"",courses:"",currentUser:r.instance.authStore.model}},components:{Options:b},mounted(){r.instance.authStore.onChange(n=>{this.currentUser=r.instance.authStore.model,c("/")}),r.currentUser&&c("/")},methods:{async login(){await r.instance.collection("users").authWithPassword(this.username,this.password)},loading(n){const e=n;var o="L\xE4dt";e.innerHTML=o+".",setInterval(function(){e.innerHTML.length>o.length+3?e.innerHTML=o+".":e.innerHTML+="."},400)},validCheck(){const n=document.getElementsByClassName("valid-check");let e=!0;for(let o=0;o<n.length;o++){const l=n[o];l.checkValidity()||(l.style.outline="3px dashed #942525",setTimeout(()=>{l.style.outline=""},4e3),e=!1)}return e},async signUp(n){if(n.preventDefault(),!this.validCheck()){setTimeout(()=>{alert("Bitte richtige Werte in markierte felder eingeben...")},100);return}if(this.password!=this.password_w){alert("Passw\xF6rter unterscheiden sich...");return}if(this.current==""){alert("Bitte eine Stufe angeben...");return}this.loading(n.srcElement);const e={username:this.username.replace("@","."),password:this.password,passwordConfirm:this.password,email:this.username,class:this.current,subjects:this.courses.replace(/, /g,",").replace(/,/g,":")};await r.instance.collection("users").create(e),await r.instance.collection("users").requestVerification(e.email),this.login()},button_select(n){n.preventDefault();const e=n.srcElement;this.current=e.innerHTML;const o=document.getElementsByClassName("select");for(let l=0;l<o.length;l++){const i=o[l];if(e==i){e.classList.add("selected");continue}i.classList.remove("selected")}}}};const x=s("div",{id:"header"},[s("h1",null,"ACCOUNT ERSTELLEN")],-1),C={id:"main"},E={id:"login"},T={id:"login-style",class:"area"},L=s("label",{for:"email"},"Mail",-1),U=s("label",{for:"password"},"Password (min. 8 Zeichen)",-1),M=s("label",{for:"password"},"Password wiederholen",-1),N=s("label",null,"Kurse",-1),V=s("br",null,null,-1),S={class:"or"};function B(n,e,o,l,i,a){const m=g;return v(),h("div",null,[x,s("div",C,[s("div",E,[s("div",T,[s("form",null,[L,u(s("input",{class:"valid-check","onUpdate:modelValue":e[0]||(e[0]=t=>i.username=t),type:"email",id:"email",required:""},null,512),[[d,i.username]]),U,u(s("input",{class:"valid-check","onUpdate:modelValue":e[1]||(e[1]=t=>i.password=t),type:"password",minlength:"8",id:"password",required:""},null,512),[[d,i.password]]),M,u(s("input",{class:"valid-check","onUpdate:modelValue":e[2]||(e[2]=t=>i.password_w=t),type:"password",minlength:"8",id:"password_w",required:""},null,512),[[d,i.password_w]]),N,u(s("input",{onkeyup:"this.value = this.value.toUpperCase();",class:"valid-check","onUpdate:modelValue":e[3]||(e[3]=t=>i.courses=t),id:"courses",type:"text",placeholder:"E G1,D G4,M L1,MU G1",pattern:"^[A-Z]{1,2}\\d?\\s[A-Z][1-9](,\\s?[A-Z]{1,2}\\d?\\s[A-Z][1-9])*$",required:""},null,512),[[d,i.courses]]),s("label",null,"Stufe: "+_(i.current),1),s("button",{class:"select",onClick:e[4]||(e[4]=t=>a.button_select(t))},"EF"),s("button",{class:"select",onClick:e[5]||(e[5]=t=>a.button_select(t))},"Q1"),s("button",{class:"select",onClick:e[6]||(e[6]=t=>a.button_select(t))},"Q2"),V,s("button",{id:"signin",onClick:e[7]||(e[7]=t=>a.signUp(t))},"REGISTRIEREN"),s("div",S,[p("oder "),w(m,{to:"/login"},{default:f(()=>[p("anmelden")]),_:1})])])])])])])}const Z=k(y,[["render",B]]);export{Z as default};
