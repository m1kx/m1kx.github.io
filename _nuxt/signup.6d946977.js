import{E as h,j as _,k as s,v as u,x as d,t as w,m as c,s as f,A as g,B as v,o as b}from"./entry.6090f691.js";import{u as k}from"./pocketbase.452a775a.js";import{_ as y}from"./_plugin-vue_export-helper.a1a6add7.js";const r=k();var p=r.authStore.model;r.authStore.onChange(n=>{p=r.authStore.model});const x={data(){return{password:"",username:"",password_w:"",current:"",courses:""}},mounted(){p&&h("/")},methods:{async login(){await r.collection("users").authWithPassword(this.username,this.password)},loading(n){const e=n;var l="L\xE4dt";e.innerHTML=l+".",setInterval(function(){e.innerHTML.length>l.length+3?e.innerHTML=l+".":e.innerHTML+="."},400)},validCheck(){const n=document.getElementsByClassName("valid-check");let e=!0;for(let l=0;l<n.length;l++){const i=n[l];i.checkValidity()||(i.style.outline="3px dashed #942525",setTimeout(()=>{i.style.outline=""},4e3),e=!1)}return e},async signUp(n){if(n.preventDefault(),!this.validCheck()){setTimeout(()=>{alert("Bitte richtige Werte in markierte felder eingeben...")},100);return}if(this.password!=this.password_w){alert("Passw\xF6rter unterscheiden sich...");return}if(this.current==""){alert("Bitte eine Stufe angeben...");return}this.loading(n.srcElement);const e={username:this.username.replace("@","."),password:this.password,passwordConfirm:this.password,email:this.username,class:this.current,subjects:this.courses.replace(/, /g,",").replace(/,/g,":")};await r.collection("users").create(e),await r.collection("users").requestVerification(e.email),this.login()},button_select(n){n.preventDefault();const e=n.srcElement;this.current=e.innerHTML;const l=document.getElementsByClassName("select");for(let i=0;i<l.length;i++){const o=l[i];if(e==o){e.classList.add("selected");continue}o.classList.remove("selected")}}}};const E=s("div",{id:"header"},[s("h1",null,"ACCOUNT ERSTELLEN")],-1),C={id:"main"},T={id:"login"},L={id:"login-style",class:"area"},M=s("label",{for:"email"},"Mail",-1),N=s("label",{for:"password"},"Password (min. 8 Zeichen)",-1),U=s("label",{for:"password"},"Password wiederholen",-1),V=s("label",null,"Kurse",-1),B=s("br",null,null,-1),S={class:"or"};function A(n,e,l,i,o,a){const m=v;return b(),_("div",null,[E,s("div",C,[s("div",T,[s("div",L,[s("form",null,[M,u(s("input",{class:"valid-check","onUpdate:modelValue":e[0]||(e[0]=t=>o.username=t),type:"email",id:"email",required:""},null,512),[[d,o.username]]),N,u(s("input",{class:"valid-check","onUpdate:modelValue":e[1]||(e[1]=t=>o.password=t),type:"password",minlength:"8",id:"password",required:""},null,512),[[d,o.password]]),U,u(s("input",{class:"valid-check","onUpdate:modelValue":e[2]||(e[2]=t=>o.password_w=t),type:"password",minlength:"8",id:"password_w",required:""},null,512),[[d,o.password_w]]),V,u(s("input",{onkeyup:"this.value = this.value.toUpperCase();",class:"valid-check","onUpdate:modelValue":e[3]||(e[3]=t=>o.courses=t),id:"courses",type:"text",placeholder:"E G1,D G4,M L1,MU G1",pattern:"^[A-Z]{1,2}\\d?\\s[A-Z][1-9](,\\s?[A-Z]{1,2}\\d?\\s[A-Z][1-9])*$",required:""},null,512),[[d,o.courses]]),s("label",null,"Stufe: "+w(o.current),1),s("button",{class:"select",onClick:e[4]||(e[4]=t=>a.button_select(t))},"EF"),s("button",{class:"select",onClick:e[5]||(e[5]=t=>a.button_select(t))},"Q1"),s("button",{class:"select",onClick:e[6]||(e[6]=t=>a.button_select(t))},"Q2"),B,s("button",{id:"signin",onClick:e[7]||(e[7]=t=>a.signUp(t))},"REGISTRIEREN"),s("div",S,[c("oder "),f(m,{to:"/login"},{default:g(()=>[c("anmelden")]),_:1})])])])])])])}const P=y(x,[["render",A]]);export{P as default};
