import{l as d,a as h,b as w,f as s,k as u,v as c,t as _,h as p,e as f,w as g,i as v,o as k}from"./entry.59b30187.js";import{p as r}from"./pocketbase.0539cbe6.js";import{O as b}from"./Options.d596d52a.js";const y={data(){return{password:"",username:"",password_w:"",current:"",courses:"",currentUser:r.instance.authStore.model}},components:{Options:b},mounted(){r.instance.authStore.onChange(e=>{this.currentUser=r.instance.authStore.model,d("/")}),r.currentUser&&d("/"),console.log("MOUNT");const t=document.getElementsByClassName("select");for(let e=0;e<t.length;e++){const l=t[e];l.onclick=()=>{l.classList.add("selected"),console.log("click");for(let i=0;i<t.length;i++)t[i]!=l&&t[i].classList.remove("selected")}}},methods:{async login(){await r.instance.collection("users").authWithPassword(this.username,this.password)},loading(t){const e=t;var l="L\xE4dt";e.innerHTML=l+".",setInterval(function(){e.innerHTML.length>l.length+3?e.innerHTML=l+".":e.innerHTML+="."},400)},validCheck(){const t=document.getElementsByClassName("valid-check");let e=!0;for(let l=0;l<t.length;l++){const i=t[l];i.checkValidity()||(i.style.outline="3px dashed #942525",setTimeout(()=>{i.style.outline=""},4e3),e=!1)}return e},async signUp(t){if(t.preventDefault(),!this.validCheck()){setTimeout(()=>{alert("Bitte richtige Werte in markierte felder eingeben...")},100);return}if(this.password!=this.password_w){alert("Passw\xF6rter unterscheiden sich...");return}if(this.current==""){alert("Bitte eine Stufe angeben...");return}this.loading(t.srcElement);const e={username:this.username.replace("@","."),password:this.password,passwordConfirm:this.password,email:this.username,class:this.current,subjects:this.courses.replace(/,/g,":")};await r.instance.collection("users").create(e),await r.instance.collection("users").requestVerification(e.email),this.login()},button_select(t){t.preventDefault(),this.current=t.srcElement.innerHTML}}};const x=s("div",{id:"header"},[s("h1",null,"ACCOUNT ERSTELLEN")],-1),C={id:"main"},E={id:"login"},T={id:"login-style",class:"area"},U=s("label",{for:"email"},"Mail",-1),L=s("label",{for:"password"},"Password (min. 8 Zeichen)",-1),M=s("label",{for:"password"},"Password wiederholen",-1),N=s("label",null,"Kurse",-1),V=s("br",null,null,-1),S={class:"or"};function B(t,e,l,i,o,a){const m=v;return k(),w("div",null,[x,s("div",C,[s("div",E,[s("div",T,[s("form",null,[U,u(s("input",{class:"valid-check","onUpdate:modelValue":e[0]||(e[0]=n=>o.username=n),type:"email",id:"email",required:""},null,512),[[c,o.username]]),L,u(s("input",{class:"valid-check","onUpdate:modelValue":e[1]||(e[1]=n=>o.password=n),type:"password",minlength:"8",id:"password",required:""},null,512),[[c,o.password]]),M,u(s("input",{class:"valid-check","onUpdate:modelValue":e[2]||(e[2]=n=>o.password_w=n),type:"password",minlength:"8",id:"password_w",required:""},null,512),[[c,o.password_w]]),N,u(s("input",{onkeyup:"this.value = this.value.toUpperCase();",class:"valid-check","onUpdate:modelValue":e[3]||(e[3]=n=>o.courses=n),id:"courses",type:"text",placeholder:"E G1,D G4,M L1,MU G1",pattern:"^([A-Z]{1,2} [A-Z]\\d)(,([A-Z]{1,2} [A-Z]\\d))*$",required:""},null,512),[[c,o.courses]]),s("label",null,"Stufe: "+_(o.current),1),s("button",{class:"select",onClick:e[4]||(e[4]=n=>a.button_select(n))},"EF"),s("button",{class:"select",onClick:e[5]||(e[5]=n=>a.button_select(n))},"Q1"),s("button",{class:"select",onClick:e[6]||(e[6]=n=>a.button_select(n))},"Q2"),V,s("button",{id:"signin",onClick:e[7]||(e[7]=n=>a.signUp(n))},"REGISTRIEREN"),s("div",S,[p("oder "),f(m,{to:"/login"},{default:g(()=>[p("anmelden")]),_:1})])])])])])])}const H=h(y,[["render",B]]);export{H as default};
